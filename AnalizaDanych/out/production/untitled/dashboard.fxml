<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="750.0" prefWidth="1100.0" xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="DashboardController">

    <left>
        <VBox spacing="10.0" style="-fx-background-color: #eee; -fx-padding: 15; -fx-pref-width: 340;">

            <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Edycja Danych" />
            <GridPane hgap="5" vgap="5">
                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="90.0" />
                    <ColumnConstraints hgrow="SOMETIMES" maxWidth="220.0" minWidth="10.0" prefWidth="190.0" />
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                    <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                    <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                    <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                    <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                </rowConstraints>
                <children>
                    <Label text="Produkt:" />
                    <TextField fx:id="txtProduct" promptText="np. Laptop" GridPane.columnIndex="1" />

                    <Label text="Kategoria:" GridPane.rowIndex="1" />
                    <TextField fx:id="txtCategory" promptText="np. Elektronika" GridPane.rowIndex="1" />

                    <Label text="Ilość:" GridPane.rowIndex="2" />
                    <TextField fx:id="txtQuantity" promptText="np. 5" GridPane.rowIndex="2" />

                    <Label text="Cena (PLN):" GridPane.rowIndex="3" />
                    <TextField fx:id="txtPrice" promptText="np. 2500.00" GridPane.rowIndex="3" />

                    <Label text="Status:" GridPane.rowIndex="4" />
                    <CheckBox fx:id="chkAvailable" text="Dostępny w sprzedaży" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                </children>
            </GridPane>

            <HBox spacing="5.0">
                <Button onAction="#handleClear" text="Wyczyść" />
                <Button onAction="#handleAdd" style="-fx-base: #4CAF50;" text="Dodaj" />
                <Button onAction="#handleUpdate" style="-fx-base: #2196F3;" text="Aktualizuj" />
                <Button onAction="#handleDelete" style="-fx-base: #F44336;" text="Usuń" />
            </HBox>

            <Separator />

            <Label style="-fx-font-weight: bold;" text="Baza Danych i Pliki" />
            <HBox spacing="5">
                <Button maxWidth="Infinity" HBox.hgrow="ALWAYS" onAction="#handleImportCSV" text="Wczytaj CSV" />
                <Button maxWidth="Infinity" HBox.hgrow="ALWAYS" onAction="#handleImportExcel" text="Wczytaj Excel" />
            </HBox>
            <Button maxWidth="Infinity" onAction="#handleSaveToDB" style="-fx-base: #FF9800; -fx-font-weight: bold;" text="ZAPISZ DO BAZY" />

            <Separator />

            <Label style="-fx-font-weight: bold;" text="Statystyka Matematyczna" />
            <ComboBox fx:id="comboField" maxWidth="Infinity" promptText="Wybierz daną liczbową..." />
            <ComboBox fx:id="comboOperation" maxWidth="Infinity" promptText="Wybierz działanie..." />
            <Button maxWidth="Infinity" onAction="#handleCalculate" text="Oblicz" />

            <VBox style="-fx-background-color: white; -fx-border-color: gray; -fx-padding: 10; -fx-border-radius: 5;">
                <Label text="WYNIK:" style="-fx-font-weight: bold;"/>
                <Label fx:id="lblResult" text="-" textFill="#0000aa" wrapText="true" style="-fx-font-size: 14px;"/>
            </VBox>
        </VBox>
    </left>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <Tab text="Baza Danych (Tabela)">
                    <content>
                        <VBox>
                            <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>
                            <TableView fx:id="tableView" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colProduct" prefWidth="150" text="Produkt" />
                                    <TableColumn fx:id="colCategory" prefWidth="120" text="Kategoria" />
                                    <TableColumn fx:id="colQuantity" prefWidth="80" text="Ilość" />
                                    <TableColumn fx:id="colPrice" prefWidth="100" text="Cena (PLN)" />
                                    <TableColumn fx:id="colAvailable" prefWidth="100" text="Dostępność" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
                    </content>
                </Tab>

                <Tab text="Wykresy">
                    <content>
                        <VBox alignment="CENTER" spacing="10">
                            <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>

                            <HBox alignment="CENTER" spacing="10" style="-fx-background-color: #f0f0f0; -fx-padding: 5; -fx-background-radius: 5;">
                                <Label style="-fx-font-weight: bold;" text="Pokaż na wykresie:" />
                                <ComboBox fx:id="comboChartType" prefWidth="200" />
                            </HBox>

                            <BarChart fx:id="barChart" VBox.vgrow="ALWAYS">
                                <xAxis>
                                    <CategoryAxis label="Produkt" side="BOTTOM" />
                                </xAxis>
                                <yAxis>
                                    <NumberAxis fx:id="axisY" label="Wartość" side="LEFT" />
                                </yAxis>
                            </BarChart>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>

    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 5; -fx-background-color: #ddd;">
            <Label fx:id="lblStatus" text="Gotowy." />

            <Region HBox.hgrow="ALWAYS" />

            <Label text="Bartosz Bieszczak, IiE rok II 135025" style="-fx-font-weight: bold; -fx-text-fill: #555;" />
        </HBox>
    </bottom>

</BorderPane>